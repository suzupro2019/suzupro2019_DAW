<html lang ="jp">
  <head>
    <meta charset="utf-8">
    <title>project select</title>
    <link href="./css/style_create.css"rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
      //グローバル変数
      var user_name = "Tanaka@example.com"; //メールアドレス　ダミー
      var your_project = [ //保存済みプロジェクト
        {name: "光について", date: "2019/10/31 21:00:33"},
        {name: "Nobady's Home", date: "2019/11/01 22:10:21"},
        {name: "雨天決行", date: "2019/12/26 08:34:02"}
      ];
      
      $(function(){
        for(var x=0; x<your_project.length; x++){
          $(".pro_list").append("<li>");
        }
        for(x=0; x<your_project.length; x++){
          $(".pro_list li").eq(x).append("<span class=\"pro_name\">"+your_project[x].name);
          $(".pro_list li").eq(x).append("<span class=\"pro_date\">"+your_project[x].date);
          $(".pro_list li").eq(x).append("<span class=\"pro_close\"><i class=\"fas fa-times fa-1x\">");
        }
        
        $(".open_project").click(function(){
          $(".open_pro_window").css("display", "block");
        });
        $(".times").click(function(){
          $(".open_pro_window").css("display", "none");
        });
        
        //プロジェクト削除
        $(".pro_list li").hover(
          function() {
            $(".pro_close").eq($(".pro_list li").index(this)).show();
          },
          function() {
            $(".pro_close").eq($(".pro_list li").index(this)).hide();
          }
        );
        $(".pro_close").click(function(){
          var pro_idx = $(".pro_close").index(this);
          if(confirm("本当に「"+your_project[pro_idx].name+"」を削除しますか。")){
            //Djangoの削除処理を記入
            $(".pro_list li").eq(pro_idx).remove();
          }else{
            return false;
          }
        });
      });
    </script>
    <script src="js/user_manage.js"></script>
  </head>
    <body>
      <div class="main">
        <header class="Top_title">
          <h1>Project select</h1>
          <div class="user_prof"></div>
          <div class="user_window">
            <p class="user_name">a@example.comさん</p>
            <p class="logout-btn">ログアウト</p>
          </div>
        </header>
        <div class="project_select">
          <a href="./start.html">
            <p class="project_item">Create New
              <br>
            <img src="./images/piano.svg" width="150" height="150">
            </p>
          </a>
          <p class="project_item open_project">Open Project
          <img src="./images/music_aicon.svg" width="150" height="150">
          </p>
        </div>
        <div class="open_pro_window">
          <p class="times">
            <i class="fas fa-times fa-2x"></i>
          </p>
          <ul class="pro_list"></ul>
        </div>
      </div>
    </body>
</html>
